/* 모바일 최적화 스타일 - Mobile First */

/* Prevent horizontal scrolling */
* {
  max-width: 100%;
}

/* Ensure containers don't overflow */
.MuiContainer-root,
.MuiGrid-container,
.MuiGrid-item {
  max-width: 100%;
  overflow-x: hidden;
}

/* Ensure minimum touch target size (44x44px) - 모바일 기본 */
button:not([class*="h-"]):not([class*="w-"]),
a:not([class*="h-"]):not([class*="w-"]),
[role="button"]:not([class*="h-"]):not([class*="w-"]),
.MuiChip-root:not([class*="h-"]):not([class*="w-"]) {
  min-height: 44px;
  min-width: 44px;
  padding: 0.5rem; /* 추가 패딩으로 터치 영역 확보 */
}

/* IconButton 터치 영역 확보 - 시각적 크기는 유지하되 터치 영역은 확장 */
.MuiIconButton-root {
  min-height: 44px;
  min-width: 44px;
  padding: 12px !important; /* 터치 영역 확보 */
}

.MuiIconButton-root svg {
  width: 20px;
  height: 20px;
}

.MuiIconButton-sizeSmall {
  min-height: 44px;
  min-width: 44px;
  padding: 10px !important;
}

.MuiIconButton-sizeSmall svg {
  width: 18px;
  height: 18px;
}

/* 체크박스, 라디오 버튼 터치 영역 확보 */
.MuiCheckbox-root,
.MuiRadio-root,
.MuiSwitch-root {
  min-height: 44px;
  min-width: 44px;
  padding: 10px !important;
}

/* Select 메뉴 항목 터치 영역 확보 */
.MuiMenuItem-root {
  min-height: 44px;
  padding: 12px 16px !important;
}

/* 탭 버튼 터치 영역 확보 */
.MuiTab-root {
  min-height: 44px;
  padding: 12px 16px !important;
}

/* Better scrolling on mobile */
* {
  -webkit-overflow-scrolling: touch;
}

/* Container padding - 모바일 기본 */
.container {
  padding-left: 1rem;
  padding-right: 1rem;
}

/* Safe area insets for notched devices */
.safe-area-inset-bottom {
  padding-bottom: calc(env(safe-area-inset-bottom) + 0.5rem);
}

.safe-area-inset-top {
  padding-top: calc(env(safe-area-inset-top) + 0.5rem);
}

/* 가상 키보드 대응 */
@supports (height: 100dvh) {
  .vh-dynamic {
    height: 100dvh;
  }
}

/* 터치 피드백 개선 */
.touch-feedback {
  -webkit-tap-highlight-color: transparent;
  user-select: none;
  -webkit-user-select: none;
}

.touch-feedback:active {
  opacity: 0.7;
  transform: scale(0.98);
}

/* 스크롤 성능 개선 */
.scroll-smooth {
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
}

/* 모바일 입력 필드 자동 줌 방지 - iOS Safari에서 16px 미만일 때 자동 줌 발생 */
input[type="text"],
input[type="email"],
input[type="tel"],
input[type="number"],
input[type="date"],
input[type="time"],
input[type="datetime-local"],
input[type="month"],
input[type="week"],
input[type="url"],
input[type="search"],
input[type="password"],
input[type="color"],
textarea,
select {
  font-size: 16px !important;
  -webkit-appearance: none;
  appearance: none;
}

/* iOS Safari에서 select 스타일링 */
select {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23666' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 0.75rem center;
  padding-right: 2.5rem;
}

/* 입력 필드 포커스 시 부드러운 스크롤 */
input:focus,
textarea:focus,
select:focus {
  scroll-margin-top: 100px;
  scroll-margin-bottom: 100px;
  position: relative;
  z-index: 1;
}

/* 가상 키보드가 열릴 때 뷰포트 높이 조정 */
@supports (height: 100dvh) {
  html:has(input:focus, textarea:focus) {
    height: 100dvh;
  }
}

/* 성능 최적화 - Mobile First */
/* GPU 가속 활용 */
.mobile-gpu-accelerate {
  transform: translateZ(0);
  will-change: transform;
}

/* 스크롤 성능 최적화 - 기본 스타일 (모바일) */
.scroll-container {
  -webkit-overflow-scrolling: touch;
  contain: layout style paint;
  scroll-padding-top: 1rem;
  scroll-padding-bottom: 1rem;
  /* GPU 가속 및 성능 최적화 */
  will-change: scroll-position;
  transform: translateZ(0);
}

/* 이미지 로딩 최적화 */
img {
  content-visibility: auto;
  contain-intrinsic-size: 1px 1000px;
}

/* 애니메이션 최적화 */
@media (prefers-reduced-motion: no-preference) {
  .animate-on-mobile {
    will-change: transform, opacity;
  }
}

/* 모달 스크롤바 스타일링 - 모바일 기본 */
.scroll-container::-webkit-scrollbar {
  width: 4px;
}

.scroll-container::-webkit-scrollbar-track {
  background: transparent;
}

.scroll-container::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 2px;
}

.scroll-container::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.3);
}

/* Responsive utility classes - Mobile First */
/* 모바일 기본 스타일 */
.mobile-full-width {
  width: 100%;
}

.mobile-hidden {
  display: none;
}

.mobile-only {
  display: block;
}

/* Touch optimization */
.touch-manipulation {
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}

/* 데스크톱에서 변경 */
@media (min-width: 768px) {
  .mobile-only {
    display: none;
  }

  /* 데스크톱에서는 터치 타겟이 작아도 됨 (마우스 사용) */
  button:not([class*="h-"]):not([class*="w-"]),
  a:not([class*="h-"]):not([class*="w-"]),
  [role="button"]:not([class*="h-"]):not([class*="w-"]),
  .MuiChip-root:not([class*="h-"]):not([class*="w-"]) {
    min-height: auto;
    min-width: auto;
    padding: initial;
  }

  /* 데스크톱에서 IconButton 원래 크기로 복원 */
  .MuiIconButton-root {
    min-height: auto;
    min-width: auto;
    padding: 8px !important;
  }

  .MuiIconButton-sizeSmall {
    min-height: auto;
    min-width: auto;
    padding: 5px !important;
  }

  /* 데스크톱에서 체크박스, 라디오 버튼 원래 크기로 복원 */
  .MuiCheckbox-root,
  .MuiRadio-root,
  .MuiSwitch-root {
    min-height: auto;
    min-width: auto;
    padding: 9px !important;
  }

  /* 데스크톱에서 메뉴 항목 원래 크기로 복원 */
  .MuiMenuItem-root {
    min-height: auto;
    padding: 6px 16px !important;
  }

  /* 데스크톱에서 탭 원래 크기로 복원 */
  .MuiTab-root {
    min-height: auto;
    padding: 12px 16px !important;
  }

  /* 데스크톱에서 스크롤바 크기 증가 */
  .scroll-container::-webkit-scrollbar {
    width: 8px;
  }
}

/* 태블릿 및 데스크톱 개선 사항 - Mobile First 확장 */
/* 태블릿 (641px ~ 1023px) */
@media (min-width: 641px) and (max-width: 1023px) {
  /* Improve touch targets on tablets */
  button,
  a,
  [role="button"] {
    min-height: 44px;
  }
}

/* 데스크톱 (1024px 이상) */
@media (min-width: 1024px) {
  /* 데스크톱 컨테이너 패딩 증가 */
  .container {
    padding-left: 2rem;
    padding-right: 2rem;
  }

  /* Hover effects only on desktop */
  .hover-effect-desktop:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
}
